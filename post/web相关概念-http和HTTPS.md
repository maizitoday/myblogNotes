---
title:       "http和HTTPS"
subtitle:    ""
description: ""
date:        2019-06-27
author:      "麦子"
image:       "https://zhaohuabing.com//img/post-bg-unix-linux.jpg"
tags:        ["web相关概念", "http和HTTPS", "tcp"]
categories:  ["Tech" ]
---

[TOC]

**转载原文：https://blog.csdn.net/xiaoming100001/article/details/81109617** 

# HTTP协议

**HTTP属于TCP/IP模型中的运用层协议**，所以通信的过程其实是对应数据的入栈和出栈。

![Xnip2019-06-27_18-40-14](/img/Xnip2019-06-27_18-40-14.png)



## 三次握手和服务器建立连接

![Xnip2019-06-27_18-36-43](/img/Xnip2019-06-27_18-36-43.png)

为什么需要三次握手呢？为了防止已失效的连接请求报文段突然又传送到了服务端，因而产生错误。

比如：client发出的第一个连接请求报文段并没有丢失，而是在某个网络结点长时间的滞留了，以致延误到连接释放以后的某个时间才到达server。本来这是一个早已失效的报文段，但是server收到此失效的连接请求报文段后，就误认为是client再次发出的一个新的连接请求，于是就向client发出确认报文段，同意建立连接。假设不采用“三次握手”，那么只要server发出确认，新的连接就建立了，由于client并没有发出建立连接的请求，因此不会理睬server的确认，也不会向server发送数据，但server却以为新的运输连接已经建立，并一直等待client发来数据。所以没有采用“三次握手”，这种情况下server的很多资源就白白浪费掉了。



##  四次挥手释放连接

![Xnip2019-06-27_18-38-08](/img/Xnip2019-06-27_18-38-08.png)

为什么需要四次挥手呢？TCP是全双工模式，当client发出FIN报文段时，只是表示client已经没有数据要发送了，client告诉server，它的数据已经全部发送完毕了；但是，这个时候client还是可以接受来server的数据；当server返回ACK报文段时，表示它已经知道client没有数据发送了，但是server还是可以发送数据到client的；当server也发送了FIN报文段时，这个时候就表示server也没有数据要发送了，就会告诉client，我也没有数据要发送了，如果收到client确认报文段，之后彼此就会愉快的中断这次TCP连接。

# HTTPS

《图解HTTP》这本书中曾提过HTTPS是身披SSL外壳的HTTP。HTTPS是一种通过计算机网络进行安全通信的传输协议，经由HTTP进行通信，利用SSL/TLS建立全信道，加密数据包。HTTPS使用的主要目的是提供对网站服务器的身份认证，同时保护交换数据的隐私与完整性。

## HTTPS有如下特点

1. 内容加密：采用混合加密技术，中间者无法直接查看明文内容，这样就无法进行抓包获取数据了。
2. 验证身份：通过证书认证客户端访问的是自己的服务器
3. 保护数据完整性：防止传输的内容被中间人冒充或者篡改

## HTTPS实现原理

![Xnip2019-06-27_18-42-10](/img/Xnip2019-06-27_18-42-10.png)

**注意：服务端必须要有一套数字证书，可以自己制作，也可以向组织申请。区别就是自己颁发的证书需要客户端验证通过，才可以继续访问，而使用受信任的公司申请的证书则不会弹出提示页面，这套证书其实就是一对公钥和私钥。**